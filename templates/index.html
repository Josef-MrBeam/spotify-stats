<!DOCTYPE html>
<html>
<head>
    <title>Spotify Skip Analyzer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

    <script>
document.addEventListener('DOMContentLoaded', function () {
    const playlistInput = document.getElementById('playlist_uri_input');
    const playlistRadio = document.getElementById('playlist_mode');
    const likedRadio = document.getElementById('liked_mode');

    playlistRadio.addEventListener('change', () => {
        playlistInput.style.display = 'block';
    });
    likedRadio.addEventListener('change', () => {
        playlistInput.style.display = 'none';
    });
});
</script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
  $(document).ready(function () {
    $('#skipTable').DataTable({
        paging: true,
        searching: true,
        order: [], // Disable initial sort
    });
  });
</script>
</head>
<body class="container mt-4">
    <h1>Spotify Skip Analyzer</h1>
    <form method="POST">
    <div class="mb-3">
        <label class="form-label">Compare against:</label><br>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="compare_mode" id="playlist_mode" value="playlist" {% if compare_mode != 'liked' %}checked{% endif %}>
            <label class="form-check-label" for="playlist_mode">Playlist URI</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="compare_mode" id="liked_mode" value="liked" {% if compare_mode == 'liked' %}checked{% endif %}>
            <label class="form-check-label" for="liked_mode">Liked Songs</label>
        </div>
    </div>

    <div class="mb-3" id="playlist_uri_input" {% if compare_mode == 'liked' %}style="display:none;"{% endif %}>
        <label for="playlist_uri" class="form-label">Enter Spotify Playlist URI:</label>
        <input type="text" id="playlist_uri" name="playlist_uri" class="form-control" placeholder="spotify:playlist:..." value="{{ playlist_uri }}">
    </div>
<div class="mb-3">
    <label for="year" class="form-label">Filter by Year (optional):</label>
    <input type="number" id="year" name="year" class="form-control" min="2000" max="2100" value="{{ year or '' }}">
</div>

    <button type="submit" class="btn btn-primary">Compare</button>
    </form>


    <hr>

    {% if summary_table %}
        <h2>Skip Stats</h2>
        {{ summary_table|safe }}
    {% endif %}
</body>
</html>
